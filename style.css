/* =========================================
   XO ULTIMATE - CONSOLE EDITION (STYLE)
   Font: Cairo (Google Fonts)
   ========================================= */

:root {
    /* --- الألوان (Dark Theme) --- */
    --bg-body: #000000;
    --bg-console: #09090b; /* Zinc 950 */
    --bg-card: #18181b;    /* Zinc 900 */
    --bg-hover: #27272a;   /* Zinc 800 */
    
    --border: #27272a;
    --border-active: #3f3f46;

    /* ألوان التفاعل */
    --accent: #FFD700;    /* ذهبي */
    --p1: #f43f5e;        /* أحمر وردي */
    --p2: #3b82f6;        /* أزرق سماوي */
    
    /* ألوان القدرات */
    --nuke: #f97316;      /* برتقالي */
    --freeze: #06b6d4;    /* تركواز */
    --hack: #8b5cf6;      /* بنفسجي */

    /* الأبعاد والخطوط */
    --radius-out: 24px;
    --radius-in: 16px;
    --font: 'Cairo', sans-serif;
}

/* --- Reset --- */
* { box-sizing: border-box; margin: 0; padding: 0; outline: none; -webkit-tap-highlight-color: transparent; }

body {
    background: var(--bg-body);
    font-family: var(--font);
    height: 100dvh;
    display: flex; justify-content: center; align-items: center;
    overflow: hidden;
    /* خلفية جمالية خفيفة جداً */
    background-image: 
        radial-gradient(circle at 10% 20%, rgba(244, 63, 94, 0.08), transparent 40%),
        radial-gradient(circle at 90% 80%, rgba(59, 130, 246, 0.08), transparent 40%);
}

.hidden { display: none !important; }

/* --- الصندوق الرئيسي (The Console) --- */
#console-container {
    width: 100%;
    height: 100%;
    background: var(--bg-console);
    position: relative;
    overflow: hidden;
    display: flex; flex-direction: column;
}

/* في الشاشات الكبيرة (لابتوب/تابلت): يتحول لصندوق عائم */
@media (min-width: 768px) {
    #console-container {
        width: 1000px;
        height: 700px;
        max-width: 95vw;
        max-height: 90vh;
        border: 1px solid var(--border);
        border-radius: var(--radius-out);
        box-shadow: 0 50px 100px -20px rgba(0,0,0,0.8);
    }
}

/* --- الشاشات (Screens) --- */
.screen {
    flex: 1; display: flex; flex-direction: column;
    height: 100%; overflow: hidden;
    transition: opacity 0.3s ease;
}

/* SVG General Style */
svg { width: 100%; height: 100%; stroke-linecap: round; stroke-linejoin: round; }

/* ===========================
   1. شاشة الدخول (Login)
   =========================== */
#screen-login {
    justify-content: center; align-items: center; text-align: center;
    background: radial-gradient(circle at top, #1c1c20, var(--bg-console));
}
.center-content { width: 100%; max-width: 400px; padding: 20px; }
.logo-text { font-size: 4rem; line-height: 1; color: #fff; letter-spacing: 2px; }
.highlight { color: var(--accent); }
.logo-sub { color: #71717a; margin-bottom: 40px; font-weight: 600; letter-spacing: 5px; text-transform: uppercase; font-size: 0.9rem; }

.input-group { position: relative; margin-bottom: 30px; }
.input-group input {
    width: 100%; background: transparent; border: none;
    border-bottom: 2px solid var(--border);
    color: #fff; font-size: 2.5rem; text-align: center;
    padding: 10px; letter-spacing: 15px; font-family: monospace;
    transition: 0.3s;
}
.input-group input:focus { border-color: var(--accent); }
.error-text { color: var(--p1); min-height: 24px; margin-top: 10px; font-size: 0.9rem; font-weight: bold; }

/* ===========================
   2. شاشة الإعدادات & القائمة
   =========================== */
.screen-head {
    height: 80px; display: flex; align-items: center; justify-content: center;
    border-bottom: 1px solid var(--border); padding: 0 30px;
    background: rgba(0,0,0,0.2);
}
.head-row { width: 100%; display: flex; justify-content: space-between; align-items: center; }

.screen-body { flex: 1; padding: 30px; overflow-y: auto; }
.setup-card {
    background: var(--bg-card); border: 1px solid var(--border);
    border-radius: var(--radius-in); padding: 20px; margin-bottom: 20px;
}
.p1-card { border-right: 4px solid var(--p1); }
.p2-card { border-right: 4px solid var(--p2); }

.setup-card label { display: block; color: #a1a1aa; margin-bottom: 10px; font-size: 0.9rem; }
.setup-card input {
    width: 100%; background: var(--bg-console); border: 1px solid var(--border);
    color: #fff; padding: 12px; border-radius: 8px; margin-bottom: 15px;
    text-align: center; font-family: var(--font);
}

.avatars-grid { display: flex; gap: 10px; justify-content: center; }
.av-btn {
    width: 50px; height: 50px; border-radius: 12px; border: 2px solid transparent;
    background: var(--bg-hover); color: #fff; font-size: 1.5rem; cursor: pointer;
    transition: 0.2s;
}
.av-btn.selected { border-color: #fff; background: rgba(255,255,255,0.1); transform: scale(1.1); }

/* Theme Buttons */
.themes-row { display: flex; gap: 10px; }
.theme-btn {
    flex: 1; padding: 12px; background: var(--bg-console); border: 1px solid var(--border);
    color: #fff; border-radius: 8px; cursor: pointer; display: flex; align-items: center;
    justify-content: center; gap: 8px; font-family: var(--font);
}
.theme-btn.active { border-color: var(--accent); background: rgba(255,255,255,0.05); }
.dot { width: 10px; height: 10px; border-radius: 50%; }
.dot.plasma { background: linear-gradient(135deg, #FFD700, #f00); }
.dot.matrix { background: #0f0; }
.dot.royal { background: #9b59b6; }

.screen-foot {
    padding: 20px 30px; border-top: 1px solid var(--border);
    background: var(--bg-card);
}

/* ===========================
   3. بطاقات القائمة (Modes)
   =========================== */
.modes-container { padding: 30px; overflow-y: auto; }
.mode-card {
    background: var(--bg-card); border: 1px solid var(--border);
    border-radius: var(--radius-in); padding: 20px; cursor: pointer;
    transition: 0.2s; position: relative; overflow: hidden;
}
.mode-card:hover { border-color: var(--accent); background: var(--bg-hover); transform: translateY(-2px); }

/* التكتيك (مميز) */
.mode-card.featured {
    display: flex; align-items: center; gap: 20px; margin-bottom: 20px;
    background: linear-gradient(45deg, var(--bg-card), rgba(255, 215, 0, 0.05));
    border: 1px solid rgba(255, 215, 0, 0.2);
}
.featured .mode-icon { width: 60px; height: 60px; color: var(--accent); }
.featured h3 { font-size: 1.2rem; margin-bottom: 5px; color: #fff; }

.grid-2col { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
.grid-2col .mode-card { text-align: center; display: flex; flex-direction: column; align-items: center; }
.mode-icon.small { width: 40px; height: 40px; color: #71717a; margin-bottom: 10px; }
.mode-card:hover .mode-icon.small { color: #fff; }
.mode-card p { font-size: 0.8rem; color: #71717a; }

/* ===========================
   4. شاشة اللعب (The Arena)
   =========================== */
.game-layout {
    display: grid; 
    grid-template-rows: 70px 1fr 90px; /* Header, Arena, Dock */
}

/* Top Bar */
.game-top-bar {
    display: flex; justify-content: space-between; align-items: center;
    padding: 0 20px; border-bottom: 1px solid var(--border);
    background: rgba(0,0,0,0.3);
}
.score-pill {
    display: flex; align-items: center; gap: 15px;
    background: #000; padding: 6px 20px; border-radius: 50px;
    border: 1px solid var(--border);
}
.p-info { display: flex; align-items: center; gap: 8px; font-weight: bold; color: #71717a; transition: 0.3s; }
.p-info.active { color: #fff; transform: scale(1.1); }
.p-info.p1.active { color: var(--p1); }
.p-info.p2.active { color: var(--p2); }
.av { font-size: 1.2rem; }

.icon-btn {
    width: 40px; height: 40px; padding: 8px; background: transparent;
    border: none; color: #a1a1aa; cursor: pointer; border-radius: 8px;
}
.icon-btn:hover { background: var(--bg-hover); color: #fff; }

/* Arena Zone (Center) */
.arena-zone {
    display: flex; justify-content: center; align-items: center;
    padding: 20px; position: relative;
    background: radial-gradient(circle, rgba(255,255,255,0.03) 0%, transparent 70%);
}
.game-grid {
    display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;
    width: min(100%, 480px); aspect-ratio: 1/1; /* مربع حديدي */
}

.sub-grid {
    display: grid; grid-template-columns: repeat(3, 1fr); gap: 3px; padding: 4px;
    background: rgba(255,255,255,0.03); border-radius: 8px;
    border: 2px solid transparent; transition: 0.3s; position: relative;
}
.sub-grid.active-zone {
    border-color: var(--accent);
    background: rgba(255, 215, 0, 0.05);
    box-shadow: 0 0 20px rgba(255, 215, 0, 0.1);
}
.sub-grid:not(.active-zone) { opacity: 0.4; pointer-events: none; }

.cell {
    background: rgba(255,255,255,0.05); border-radius: 4px; cursor: pointer;
    display: flex; justify-content: center; align-items: center;
    font-size: 1.4rem; font-weight: bold; user-select: none;
}
.cell:hover { background: rgba(255,255,255,0.15); }
.cell.x { color: var(--p1); background: rgba(244, 63, 94, 0.15); }
.cell.o { color: var(--p2); background: rgba(59, 130, 246, 0.15); }

/* Winner Stamp */
.sub-grid.won::after {
    content: attr(data-winner); position: absolute; inset: 0;
    display: flex; justify-content: center; align-items: center;
    font-size: 5rem; font-weight: 900; z-index: 10;
    text-shadow: 0 10px 30px rgba(0,0,0,0.9);
}
.sub-grid.winner-X::after { color: var(--p1); }
.sub-grid.winner-O::after { color: var(--p2); }

/* Status Floater */
.status-floater {
    position: absolute; top: 80px; left: 50%; transform: translateX(-50%);
    background: #000; color: #fff; padding: 8px 20px; border-radius: 20px;
    border: 1px solid var(--border); font-size: 0.85rem; pointer-events: none;
    white-space: nowrap; z-index: 5;
}

/* Dock (Bottom) */
.game-dock {
    display: flex; justify-content: center; gap: 30px; align-items: center;
    border-top: 1px solid var(--border); background: rgba(0,0,0,0.3);
}
.dock-item {
    background: transparent; border: none; color: #71717a;
    display: flex; flex-direction: column; align-items: center; gap: 5px;
    cursor: pointer; position: relative; width: 60px;
}
.dock-icon {
    width: 44px; height: 44px; padding: 10px; border-radius: 12px;
    background: rgba(255,255,255,0.05); transition: 0.2s;
}
.dock-item:hover .dock-icon { background: rgba(255,255,255,0.1); transform: translateY(-4px); }
.dock-item.active .dock-icon { background: var(--accent); color: #000; box-shadow: 0 0 15px var(--accent); }
.dock-item .lbl { font-size: 0.7rem; font-weight: bold; }
.dock-item .badge {
    position: absolute; top: -5px; right: 5px; background: #fff; color: #000;
    width: 18px; height: 18px; border-radius: 50%; font-size: 0.7rem;
    display: flex; justify-content: center; align-items: center; font-weight: bold;
}
.dock-item:disabled { opacity: 0.3; pointer-events: none; }

/* ===========================
   5. Modals (Popups)
   =========================== */
.modal-layer {
    position: absolute; inset: 0; background: rgba(0,0,0,0.85); z-index: 100;
    display: flex; justify-content: center; align-items: center; backdrop-filter: blur(4px);
}
.modal-box {
    background: var(--bg-card); border: 1px solid var(--border);
    border-radius: var(--radius-out); width: 90%; max-width: 400px;
    display: flex; flex-direction: column; overflow: hidden;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.9);
}

/* Calculator Style */
.calc-box { padding: 20px; }
.calc-screen {
    background: #000; padding: 15px; border-radius: 12px; margin-bottom: 15px;
    text-align: center; border: 1px solid var(--border);
}
.q-row { color: #a1a1aa; font-size: 0.9rem; margin-bottom: 5px; }
.a-row { color: #fff; font-size: 2rem; font-family: monospace; min-height: 40px; }
.numpad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
.numpad button {
    height: 55px; background: var(--bg-hover); border: none; border-radius: 10px;
    color: #fff; font-size: 1.2rem; cursor: pointer; transition: 0.1s;
}
.numpad button:active { background: #52525b; }
.numpad .danger { background: rgba(244, 63, 94, 0.1); color: var(--p1); }
.numpad .success { grid-column: span 2; background: var(--p2); color: #fff; }
.timer-bar { height: 4px; background: #27272a; margin-bottom: 10px; border-radius: 2px; overflow: hidden; }
#timer-fill { height: 100%; background: var(--p1); width: 100%; transition: width 0.1s linear; }

/* Help & Win Styles */
.modal-head { padding: 15px 20px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.2); }
.modal-head button { background: none; border: none; color: #fff; font-size: 1.5rem; cursor: pointer; }
.modal-body { padding: 20px; color: #d4d4d8; font-size: 0.9rem; line-height: 1.6; }
.modal-body h4 { color: var(--accent); margin-bottom: 5px; }
.modal-body hr { border: 0; height: 1px; background: var(--border); margin: 15px 0; }
.help-list { list-style: none; padding: 0; }
.help-list li { margin-bottom: 10px; }

.win-box { padding: 40px; text-align: center; }
.win-icon { font-size: 5rem; margin-bottom: 20px; animation: bounce 1s infinite alternate; }
@keyframes bounce { to { transform: translateY(-10px); } }
.modal-actions { display: flex; gap: 10px; margin-top: 20px; }

/* Buttons */
.btn-main { background: #fff; color: #000; border: none; padding: 12px; border-radius: 12px; font-weight: bold; cursor: pointer; font-family: var(--font); transition: 0.2s; }
.btn-main:hover { transform: scale(1.02); }
.btn-sec { background: var(--bg-hover); color: #fff; border: 1px solid var(--border); padding: 12px; border-radius: 12px; font-weight: bold; cursor: pointer; font-family: var(--font); }
.full { width: 100%; }

/* Animations */
.shake { animation: shake 0.4s ease-in-out; }
@keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }

/* Mobile Tweaks */
@media (max-width: 767px) {
    #console-container { border-radius: 0; border: none; }
    .game-layout { grid-template-rows: 60px 1fr 80px; }
}
