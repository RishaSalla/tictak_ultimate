/* =========================================
   ğŸ“ LAYOUT SYSTEM (CORRECTED)
   Ø¥ØµÙ„Ø§Ø­ Ø§Ù„ØªÙ…Ø±ÙƒØ² + Ø¹Ø²Ù„ Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
   ========================================= */

/* 1. Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØµÙØ­Ø© ÙˆØ§Ù„ØªÙˆØ³ÙŠØ· */
body {
    margin: 0; padding: 0;
    width: 100vw; height: 100vh;
    background-color: var(--bg-dark);
    color: var(--text-main);
    font-family: var(--font-ui);
    /* Ø§Ù„ØªÙˆØ³ÙŠØ· Ø§Ù„Ø¥Ø¬Ø¨Ø§Ø±ÙŠ Ù„Ù„Ø­Ø§ÙˆÙŠØ© */
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden; /* Ù„Ù…Ù†Ø¹ Ø£ÙŠ ØªÙ…Ø±ÙŠØ± ØºÙŠØ± Ù…Ø±ØºÙˆØ¨ */
}

/* 2. Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø²Ø¬Ø§Ø¬ÙŠØ© Ø§Ù„ÙƒØ¨ÙŠØ±Ø© */
.glass-stage {
    position: relative;
    width: 95%; max-width: 1100px;
    height: 90vh;
    background: var(--bg-panel);
    border: 1px solid var(--border-color);
    box-shadow: 0 0 50px rgba(0,0,0,0.6);
    border-radius: 12px;
    overflow: hidden; 
    /* Ø¶Ù…Ø§Ù† Ø£Ù† Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© ØªØªÙ…Ø±ÙƒØ² */
    display: flex; flex-direction: column;
}

/* 3. Ù†Ø¸Ø§Ù… Ø§Ù„Ø·Ø¨Ù‚Ø§Øª Ù„Ù„Ø´Ø§Ø´Ø§Øª (Screens) */
.screen {
    position: absolute;
    inset: 0; /* ØªØºØ·ÙŠ ÙƒØ§Ù…Ù„ Ø§Ù„Ø­Ø§ÙˆÙŠØ© */
    width: 100%; height: 100%;
    background: var(--bg-panel);
    display: flex; flex-direction: column;
    z-index: 10;
    opacity: 0; 
    pointer-events: none; /* ØªÙ…Ù†Ø¹ Ø§Ù„Ø¶ØºØ· Ø¹Ù„ÙŠÙ‡Ø§ ÙˆÙ‡ÙŠ Ù…Ø®ÙÙŠØ© */
    transition: opacity 0.3s ease;
    padding: 20px;
    box-sizing: border-box; /* Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø­ÙˆØ§Ù Ø¨Ø¯Ù‚Ø© */
}

.screen.active {
    opacity: 1;
    pointer-events: all;
    z-index: 20;
}

/* ÙƒÙ„Ø§Ø³ Ù…Ø³Ø§Ø¹Ø¯ Ù„Ù„ØªÙˆØ³ÙŠØ· Ø¯Ø§Ø®Ù„ Ø§Ù„Ø´Ø§Ø´Ø§Øª */
.center-flex {
    justify-content: center;
    align-items: center;
    text-align: center;
}

/* 4. Ø¥ØµÙ„Ø§Ø­ Ø§Ù„ÙƒØ§Ø±Ø«Ø©: Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© (Modals) */
/* Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù†Ø§Ù‚Øµ Ù‡Ùˆ Ø§Ù„Ø°ÙŠ ÙƒØ§Ù† ÙŠØ³Ø¨Ø¨ Ø¸Ù‡ÙˆØ± Ø§Ù„Ø¹Ù†Ø§ØµØ± Ù…Ø¨Ø¹Ø«Ø±Ø© */
.modal-overlay {
    position: fixed; /* Ø®Ø±ÙˆØ¬ Ù…Ù† Ø§Ù„ØªØ¯ÙÙ‚ Ø§Ù„Ø¹Ø§Ø¯ÙŠ Ù„Ù„ØµÙØ­Ø© */
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background: rgba(0, 0, 0, 0.85); /* Ø®Ù„ÙÙŠØ© Ù…Ø¹ØªÙ…Ø© */
    backdrop-filter: blur(5px);
    z-index: 1000; /* Ø·Ø¨Ù‚Ø© Ø¹Ù„ÙŠØ§ Ø¬Ø¯Ø§Ù‹ */
    display: flex;
    justify-content: center;
    align-items: center;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
}

/* Ø­Ø§Ù„Ø© Ø§Ù„Ø¸Ù‡ÙˆØ± Ù„Ù„Ù†Ø§ÙØ°Ø© */
.modal-overlay:not(.hidden) {
    opacity: 1;
    pointer-events: all;
}

/* 5. ØªØ®Ø·ÙŠØ· ØµÙØ­Ø© Ø§Ù„Ø£Ù†Ù…Ø§Ø· */
.modes-grid-layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    width: 100%; max-width: 500px;
    margin: 0 auto; /* ØªÙˆØ³ÙŠØ· Ø§Ù„ÙƒØªÙ„Ø© */
}
.mode-card.span-2 { grid-column: span 2; }

/* 6. ØªØ®Ø·ÙŠØ· Ø³Ø§Ø­Ø© Ø§Ù„Ù„Ø¹Ø¨ */
.arena-container {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    height: 100%; width: 100%;
}
.grid-wrapper {
    /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ù‚Ø¹Ø© */
    display: flex; justify-content: center; align-items: center;
}
.fixed-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    width: var(--arena-size); /* Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ØªØºÙŠØ± */
    height: var(--arena-size);
    gap: 8px;
    background: #000;
    padding: 8px;
    border-radius: 8px;
}
.side-panel {
    width: 120px;
    display: flex; flex-direction: column;
    align-items: center; gap: 15px;
}

/* --- 7. ØªÙƒÙ…Ù„Ø© Ø§Ù„Ø±Ù‚Ø¹Ø© (GRID STRUCTURE) --- */


.sub-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 2px;
    background: var(--bg-panel); /* Ù„ÙˆÙ† Ø§Ù„ÙÙˆØ§ØµÙ„ */
    border: 1px solid #333;
    border-radius: 4px;
    overflow: hidden;
}

.cell {
    background: #1a1a1a; /* Ù„ÙˆÙ† Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„ØµØºÙŠØ± */
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: var(--font-tech);
    font-size: 1.5rem;
    cursor: pointer;
    transition: background 0.2s;
    user-select: none;
    position: relative; /* Ù…Ù‡Ù… Ù„Ù„Ø±Ù…ÙˆØ² */
}

.cell:hover {
    background: #252525;
}

/* ØªÙ…ÙŠÙŠØ² Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù†Ø´Ø·Ø© (Active Zone) */
.active-zone {
    box-shadow: inset 0 0 15px var(--p1-dim);
    border: 1px solid var(--p1-color);
    background: rgba(255, 158, 100, 0.05);
}

/* ØªØ£Ø«ÙŠØ± Ø§Ù„ÙÙˆØ² Ø¨Ø§Ù„Ù…Ø±Ø¨Ø¹ */
.sub-grid.won {
    position: relative;
}
.sub-grid.won::after {
    content: attr(data-symbol);
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 4rem;
    font-weight: bold;
    color: inherit;
    background: rgba(0,0,0,0.85); /* ØªØºØ·ÙŠØ© Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
    z-index: 5;
    text-shadow: 0 0 20px currentColor;
}
