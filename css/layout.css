/* =========================================
   ğŸ“ LAYOUT ENGINE - FIXED
   ========================================= */

/* 1. ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø© */
* { box-sizing: border-box; margin: 0; padding: 0; outline: none; -webkit-tap-highlight-color: transparent; }

body {
    height: 100vh; width: 100vw; overflow: hidden;
    font-family: var(--font-txt);
    color: var(--text-main);
    background: #f0f4f8; 
    display: flex; align-items: center; justify-content: center;
}

/* 2. Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© */
.mesh-background {
    position: absolute; inset: 0; z-index: -1;
    overflow: hidden;
    background: radial-gradient(circle at 50% 50%, #fff, #f2f6f9);
}
.blob {
    position: absolute; border-radius: 50%;
    filter: blur(80px); opacity: 0.5;
    animation: float 25s infinite alternate ease-in-out;
}
.blob-1 { width: 600px; height: 600px; background: var(--p1-color); top: -150px; left: -150px; }
.blob-2 { width: 500px; height: 500px; background: var(--p2-color); bottom: -100px; right: -100px; animation-delay: -5s; }
.blob-3 { width: 400px; height: 400px; background: #e0e0e0; top: 40%; left: 30%; opacity: 0.3; animation-delay: -10s; }

@keyframes float {
    0% { transform: translate(0, 0) scale(1); }
    100% { transform: translate(40px, 60px) scale(1.05); }
}

/* 3. Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ø¹Ø§Ø¦Ù…Ø© */
.glass-stage {
    position: relative;
    background: var(--glass-bg);
    backdrop-filter: blur(var(--blur));
    -webkit-backdrop-filter: blur(var(--blur));
    border: var(--glass-border);
    box-shadow: 0 40px 100px rgba(0,0,0,0.1);
    overflow: hidden; /* Ù‡Ø°Ø§ Ù…Ø§ ÙƒØ§Ù† ÙŠÙ‚Øµ Ø§Ù„Ù†ÙˆØ§ÙØ° Ø³Ø§Ø¨Ù‚Ø§Ù‹ */
    display: flex; flex-direction: column;
    transition: all 0.5s ease;
    z-index: 10; /* Ø·Ø¨Ù‚Ø© Ø§Ù„Ù…Ù†ØµØ© */
}

/* ÙˆØ¶Ø¹ Ø§Ù„Ù„Ø§Ø¨ØªÙˆØ¨ */
@media (min-width: 900px) {
    .glass-stage {
        width: 1000px; height: 700px;
        border-radius: var(--radius-lg);
    }
}
/* ÙˆØ¶Ø¹ Ø§Ù„Ø¬ÙˆØ§Ù„ */
@media (max-width: 899px) {
    .glass-stage {
        width: 100%; height: 100%;
        border-radius: 0; border: none;
    }
}

/* 4. Ø§Ù„Ø´Ø§Ø´Ø§Øª */
.screen {
    position: absolute; inset: 0; padding: 20px;
    display: flex; flex-direction: column;
    opacity: 0; pointer-events: none;
    transform: translateY(10px);
    transition: all 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
    z-index: 10;
}
.screen.active { opacity: 1; pointer-events: all; transform: translateY(0); }
.screen.hidden { display: none !important; }

/* 5. ØªÙ†Ø³ÙŠÙ‚ ØµÙØ­Ø© Ø§Ù„Ù„Ø¹Ø¨ */
.game-layout {
    flex: 1; display: flex; align-items: center; justify-content: space-between;
    gap: 20px; padding: 10px; height: 100%;
}
.player-panel {
    flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center;
    gap: 20px; padding: 20px;
    background: rgba(255,255,255,0.4); border-radius: var(--radius-md); height: 90%;
}
.board-container {
    flex: 2; display: flex; flex-direction: column; align-items: center; justify-content: center;
}

/* Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ø¬ÙˆØ§Ù„ */
@media (max-width: 899px) {
    .game-layout { flex-direction: column; justify-content: center; gap: 10px; }
    .player-panel {
        flex-direction: row; width: 100%; height: auto;
        padding: 10px; justify-content: space-between;
    }
    .board-container { flex: unset; margin: 10px 0; }
}

/* 6. Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© (MODAL OVERLAY FIX) - Ø§Ù„Ø­Ù„ Ù‡Ù†Ø§ */
.modal-overlay {
    position: fixed; /* ÙŠØ­Ø±Ø± Ø§Ù„Ù†Ø§ÙØ°Ø© Ù…Ù† Ø£ÙŠ Ø­Ø§ÙˆÙŠØ© */
    inset: 0;        /* ÙŠØºØ·ÙŠ Ø§Ù„Ø´Ø§Ø´Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ */
    z-index: 9999;   /* ÙÙˆÙ‚ ÙƒÙ„ Ø´ÙŠØ¡ Ø¨Ù„Ø§ Ù…Ù†Ø§Ø²Ø¹ */
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
    
    /* Ø§Ù„ØªÙˆØ³Ø· Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ */
    display: flex;
    align-items: center;
    justify-content: center;
    
    /* Ø§Ù„Ø­Ø±ÙƒØ© */
    opacity: 0; visibility: hidden;
    transition: all 0.3s ease;
}

/* Ø¹Ù†Ø¯ Ø§Ù„ØªÙØ¹ÙŠÙ„ (ØªØªÙ… Ø¥Ø¶Ø§ÙØªÙ‡ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª Ù„Ø§Ø­Ù‚Ø§Ù‹ ÙˆÙ„ÙƒÙ† Ù†Ø¬Ù‡Ø²Ù‡ Ù‡Ù†Ø§) */
.modal-overlay:not(.hidden) {
    opacity: 1; visibility: visible;
}

/* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ù…Ø³Ø§Ø¹Ø¯Ø© */
.center-content { align-items: center; justify-content: center; text-align: center; }
.scroll-wrapper { flex: 1; overflow-y: auto; padding: 10px 5px; }
.clay-header {
    height: 50px; display: flex; justify-content: space-between; align-items: center;
    margin-bottom: 10px; flex-shrink: 0;
}
.clay-footer { padding-top: 15px; flex-shrink: 0; }
