<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>X-O MATH ULTIMATE</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="light-mode">
    
    <div id="app-bg-layer">
        <div class="grid-mesh"></div>
    </div>

    <div id="app-container">

        <div id="setup-screen" class="app-screen active">
            <div class="menu-card">
                <header class="menu-header">
                    <h1 class="game-logo">X-O MATH <span class="badge-pro">PRO</span></h1>
                    <p class="game-tagline">النظام الحسابي الاستراتيجي المتطور</p>
                </header>

                <div class="menu-body">
                    <div class="players-input-group">
                        <div class="input-field">
                            <input type="text" id="nameX" placeholder="اسم فريق X" autocomplete="off">
                        </div>
                        <div class="vs-text">ضد</div>
                        <div class="input-field">
                            <input type="text" id="nameO" placeholder="اسم فريق O" autocomplete="off">
                        </div>
                    </div>

                    <div class="levels-selection-grid">
                        <div class="lvl-card active" data-lvl="1">
                            <span class="lvl-index">01</span>
                            <div class="lvl-content">
                                <h4>المستوى المباشر</h4>
                                <p>عمليات أساسية ضمن النطاق 1-9</p>
                            </div>
                        </div>
                        <div class="lvl-card" data-lvl="2">
                            <span class="lvl-index">02</span>
                            <div class="lvl-content">
                                <h4>العدد المفقود</h4>
                                <p>استنتاج المتغير المجهول في المعادلة</p>
                            </div>
                        </div>
                        <div class="lvl-card" data-lvl="3">
                            <span class="lvl-index">03</span>
                            <div class="lvl-content">
                                <h4>الفراغ المزدوج</h4>
                                <p>تحديد رقمين مفقودين (بدون الرقم 1)</p>
                            </div>
                        </div>
                        <div class="lvl-card" data-lvl="4">
                            <span class="lvl-index">04</span>
                            <div class="lvl-content">
                                <h4>الميزان الرقمي</h4>
                                <p>موازنة طرفي المعادلة الحسابية</p>
                            </div>
                        </div>
                    </div>

                    <div class="extra-configs">
                        <div class="config-item">
                            <label>مؤقت التفكير</label>
                            <select id="gameTimer">
                                <option value="0">بدون وقت</option>
                                <option value="5">5 ثوانٍ</option>
                                <option value="10" selected>10 ثوانٍ</option>
                                <option value="20">20 ثانية</option>
                            </select>
                        </div>
                        <button class="btn-secondary" onclick="openInstruction()">دليل القواعد</button>
                    </div>
                </div>

                <footer class="menu-footer">
                    <button class="btn-primary-launch" onclick="launchGame()">تأكيد وبدء اللعبة</button>
                </footer>
            </div>
        </div>

        <div id="game-screen" class="app-screen hidden">
            <div class="arena-layout">
                <header class="arena-top">
                    <div id="p-card-X" class="p-card x-side">
                        <h2 id="disp-nameX">TEAM X</h2>
                        <div class="p-stats">النقاط: <span id="p-scoreX">0</span></div>
                    </div>

                    <div class="arena-timer-hub">
                        <div class="timer-circle-wrap">
                            <svg viewBox="0 0 100 100">
                                <circle class="t-bg" cx="50" cy="50" r="45"></circle>
                                <circle id="t-progress" cx="50" cy="50" r="45"></circle>
                            </svg>
                            <span id="t-count">10</span>
                        </div>
                    </div>

                    <div id="p-card-O" class="p-card o-side">
                        <h2 id="disp-nameO">TEAM O</h2>
                        <div class="p-stats">النقاط: <span id="p-scoreO">0</span></div>
                    </div>
                </header>

                <main class="arena-center">
                    <div id="main-grid-81"></div>
                </main>

                <footer class="arena-bottom">
                    <div id="move-status-msg" class="msg-banner hidden">قوة اللعب الحر مفعلة</div>
                    <div class="arena-btns">
                        <button onclick="location.reload()">الرئيسية</button>
                        <button onclick="toggleTheme()">المظهر</button>
                    </div>
                </footer>
            </div>
        </div>

        <div id="modal-overlay" class="modal-layer hidden">
            <div id="help-pane" class="modal-pane hidden">
                <h3>دليل النظام</h3>
                <div class="pane-content">
                    <p><strong>قاعدة التوجيه:</strong> المربع الصغير الذي تختاره يحدد موقع خصمك التالي في المربعات الكبيرة.</p>
                    <p><strong>الفوز:</strong> استحوذ على 3 مربعات كبيرة متتالية للفوز بالمباراة.</p>
                </div>
                <button class="btn-close" onclick="closeModal()">إغلاق</button>
            </div>

            <div id="math-pane" class="modal-pane hidden">
                <div class="math-header"><span id="math-lvl-label">المستوى 1</span></div>
                <div id="math-eq" class="math-eq-text">-- = --</div>
                <div class="math-input-view" id="math-input">_</div>
                <div class="math-numpad">
                    <button onclick="keyPress(1)">1</button><button onclick="keyPress(2)">2</button><button onclick="keyPress(3)">3</button>
                    <button onclick="keyPress(4)">4</button><button onclick="keyPress(5)">5</button><button onclick="keyPress(6)">6</button>
                    <button onclick="keyPress(7)">7</button><button onclick="keyPress(8)">8</button><button onclick="keyPress(9)">9</button>
                    <button class="key-act" onclick="keyClear()">C</button><button onclick="keyPress(0)">0</button><button class="key-act" onclick="keyDel()">مسح</button>
                </div>
            </div>
        </div>

    </div>

    <script src="script.js"></script>
</body>
</html>
