<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>X-O MATH ULTIMATE</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="light-mode">
    
    <div id="dynamic-bg">
        <div class="grid-overlay"></div>
    </div>

    <div id="app-root">

        <div id="setup-screen" class="screen-view active">
            <div class="main-hub">
                <header class="hub-header">
                    <h1 class="brand-title">X-O MATH <span class="pro-tag">PRO</span></h1>
                    <p class="brand-subtitle">التحدي الحسابي الاستراتيجي الأكبر</p>
                </header>

                <div class="hub-body">
                    <section class="config-section">
                        <div class="input-wrapper">
                            <input type="text" id="pXName" placeholder="فريق X" maxlength="15">
                            <div class="input-focus-line"></div>
                        </div>
                        <div class="vs-divider">ضد</div>
                        <div class="input-wrapper">
                            <input type="text" id="pOName" placeholder="فريق O" maxlength="15">
                            <div class="input-focus-line"></div>
                        </div>
                    </section>

                    <section class="levels-grid">
                        <div class="level-card active" data-level="1">
                            <div class="level-num">01</div>
                            <div class="level-info">
                                <h3>المستوى الكلاسيكي</h3>
                                <p>عمليات حسابية مباشرة (1-9)</p>
                            </div>
                        </div>
                        <div class="level-card" data-level="2">
                            <div class="level-num">02</div>
                            <div class="level-info">
                                <h3>العدد المفقود</h3>
                                <p>استنتاج الطرف الناقص في المعادلة</p>
                            </div>
                        </div>
                        <div class="level-card" data-level="3">
                            <div class="level-num">03</div>
                            <div class="level-info">
                                <h3>الفراغ المزدوج</h3>
                                <p>رقمين مفقودين (يُمنع الرقم 1)</p>
                            </div>
                        </div>
                        <div class="level-card" data-level="4">
                            <div class="level-num">04</div>
                            <div class="level-info">
                                <h3>الميزان الرقمي</h3>
                                <p>موازنة طرفي المعادلة بذكاء</p>
                            </div>
                        </div>
                    </section>

                    <section class="quick-settings">
                        <div class="setting-item">
                            <label>المؤقت الزمني</label>
                            <select id="timerVal">
                                <option value="0">بدون وقت</option>
                                <option value="5">5 ثوانٍ</option>
                                <option value="10" selected>10 ثوانٍ</option>
                                <option value="20">20 ثانية</option>
                            </select>
                        </div>
                        <button class="guide-trigger-btn" onclick="openHelp()">دليل القواعد والمستويات</button>
                    </section>
                </div>

                <footer class="hub-footer">
                    <button class="launch-game-btn" onclick="startGame()">تأكيد وبدء التحدي</button>
                </footer>
            </div>
        </div>

        <div id="game-screen" class="screen-view hidden">
            <div class="arena-wrapper">
                <header class="arena-header">
                    <div id="card-X" class="team-status x-theme">
                        <div class="status-indicator"></div>
                        <div class="team-meta">
                            <h2 id="name-X">TEAM X</h2>
                            <p>المربعات: <span id="val-X">0</span></p>
                        </div>
                    </div>

                    <div class="arena-timer">
                        <svg class="timer-svg" viewBox="0 0 100 100">
                            <circle class="timer-bg" cx="50" cy="50" r="45"></circle>
                            <circle id="timer-progress" cx="50" cy="50" r="45"></circle>
                        </svg>
                        <span id="timer-display">10</span>
                    </div>

                    <div id="card-O" class="team-status o-theme">
                        <div class="team-meta">
                            <h2 id="name-O">TEAM O</h2>
                            <p>المربعات: <span id="val-O">0</span></p>
                        </div>
                        <div class="status-indicator"></div>
                    </div>
                </header>

                <main class="arena-main">
                    <div id="grid-81-container"></div>
                </main>

                <footer class="arena-footer">
                    <div id="free-play-status" class="status-banner hidden">وضع اللعب الحر نشط الآن</div>
                    <div class="arena-actions">
                        <button onclick="location.reload()">القائمة الرئيسية</button>
                        <button onclick="toggleDisplayMode()">تبديل المظهر</button>
                    </div>
                </footer>
            </div>
        </div>

        <div id="help-modal" class="modal-layer hidden">
            <div class="modal-window help-window">
                <header>دليل المستخدم</header>
                <div class="modal-scrollable">
                    <section>
                        <h4>قوانين السيطرة</h4>
                        <p>يجب الفوز بثلاث مربعات كبيرة متتالية لتحقيق النصر الكلي.</p>
                    </section>
                    <section>
                        <h4>الذكاء الاستراتيجي</h4>
                        <p>حركتك الحالية تحدد لخصمك موقعه القادم. التوجيه هو مفتاح الفوز.</p>
                    </section>
                    <section>
                        <h4>توضيح المستويات</h4>
                        <p>كل مستوى يتطلب مهارة حسابية مختلفة، مع الالتزام بنطاق الأرقام من 1 إلى 9 في الإجابات.</p>
                    </section>
                </div>
                <button class="modal-close" onclick="closeHelp()">إغلاق الدليل</button>
            </div>
        </div>

        <div id="math-modal" class="modal-layer hidden">
            <div class="modal-window math-window">
                <div class="math-header">
                    <span id="level-tag">LEVEL 01</span>
                </div>
                <div id="equation-view" class="equation-text">-- = --</div>
                <div class="input-display">
                    <div id="ans-preview-box">_</div>
                </div>
                <div class="numpad-grid">
                    <button onclick="numIn(1)">1</button><button onclick="numIn(2)">2</button><button onclick="numIn(3)">3</button>
                    <button onclick="numIn(4)">4</button><button onclick="numIn(5)">5</button><button onclick="numIn(6)">6</button>
                    <button onclick="numIn(7)">7</button><button onclick="numIn(8)">8</button><button onclick="numIn(9)">9</button>
                    <button class="btn-secondary" onclick="numClear()">C</button><button onclick="numIn(0)">0</button><button class="btn-secondary" onclick="numDel()">تراجع</button>
                </div>
            </div>
        </div>

    </div>

    <script src="script.js"></script>
</body>
</html>
