<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Math Matrix | ุฃูุงุฏูููุฉ ุงูุฐูุงุก</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <section id="login-gate" class="full-screen-layer">
        <div class="glass-card login-box">
            <h1 class="brand-title">MATH <span class="theme-text">MATRIX</span></h1>
            <p class="access-label">ุจูุงุจุฉ ุงููุตูู</p>
            <div class="input-wrapper">
                <input type="password" id="access-code" maxlength="8" placeholder="โโโโโโโโ">
                <div class="glow-bar"></div>
            </div>
            <button id="btn-verify" class="btn-primary">ุฏุฎูู ุงููุธุงู</button>
            <p id="login-msg" class="error-msg"></p>
        </div>
    </section>

    <div id="app-content" class="hidden">
        
        <div id="game-hud" class="hud-bar hidden">
            <button class="btn-icon-small" onclick="App.exitGame()" title="ุงูุณุญุงุจ">โฉ๏ธ</button>
            
            <div class="hud-player p-x" id="hud-x">
                <div class="hud-avatar" id="avatar-display-x">X</div>
                <span id="hud-name-x">ุงููุงุนุจ 1</span>
            </div>
            
            <div class="hud-score">
                <span class="score-val" id="score-board">0 - 0</span>
            </div>

            <div class="hud-player p-o" id="hud-o">
                <span id="hud-name-o">ุงููุงุนุจ 2</span>
                <div class="hud-avatar" id="avatar-display-o">O</div>
            </div>
            
            <button class="btn-icon-small" onclick="App.showInstructions()" title="ุฏููู ุงููุนุจ">โ</button>
        </div>

        <div id="main-menu">
            <header class="game-header">
                <h1 class="logo-ar">ุงูุนุจุงูุฑุฉ <span class="version-tag">PRO</span></h1>
                <p class="subtitle-ar">ุงุฎุชุฑ ููุท ุงูุชุญุฏู</p>
                <button class="btn-text" onclick="App.showInstructions()">๐ ุฏููู ุงููุนุจ ูุงูููุงููู</button>
            </header>

            <div class="modes-grid">
                <div class="mode-card featured-mode" onclick="selectLevel('strategy', this)">
                    <div class="card-bg"></div>
                    <div class="mode-content">
                        <div class="mode-icon">โ๏ธ</div>
                        <div class="mode-info">
                            <h2>ุงูุชูุชูู ุงูุงุณุชุฑุงุชูุฌู (XO)</h2>
                            <p>ุชุญุฏู ุงูุฐูุงุก ุงูุฎุงูุต. ุญุงุตุฑ ุฎุตูู ุจุฏูู ุฑูุงุถูุงุช.</p>
                        </div>
                    </div>
                </div>

                <div class="mode-card" onclick="selectLevel('clash', this)">
                    <div class="card-bg"></div>
                    <h3>โก ุงูููุงุฌูุฉ</h3>
                    <p>ุฌุฏูู ุงูุถุฑุจ ุงูุณุฑูุน</p>
                </div>

                <div class="mode-card" onclick="selectLevel('code', this)">
                    <div class="card-bg"></div>
                    <h3>๐งฉ ุงูุดููุฑุฉ</h3>
                    <p>ุฃูุฌุฏ ุงููุฌููู (ุณ)</p>
                </div>

                <div class="mode-card" onclick="selectLevel('duality', this)">
                    <div class="card-bg"></div>
                    <h3>โ๏ธ ุงูุซูุงุฆูุงุช</h3>
                    <p>ุฒูุฌู ุฃู ูุฑุฏูุ</p>
                </div>

                <div class="mode-card" onclick="selectLevel('genius', this)">
                    <div class="card-bg"></div>
                    <h3>๐ง ุงูุนุจุงูุฑุฉ</h3>
                    <p>ุงูุชุญุฏู ุงูุดุงูู</p>
                </div>
            </div>

            <div class="action-area">
                <button id="btn-start-game" class="btn-primary hidden" onclick="App.launchGame()">ุฅุนุฏุงุฏ ุงูุชุญุฏู</button>
            </div>
        </div>

        <div id="game-container" class="hidden">
            <div class="game-wrapper">
                <div class="power-ups-bar">
                    <div class="power-item">
                        <button class="power-btn btn-nuke" onclick="App.usePower('nuke')">๐งน</button>
                        <span>ููุญุงุฉ</span>
                        <span class="power-count" id="count-nuke">1</span>
                    </div>
                    <div class="power-item">
                        <button class="power-btn btn-freeze" onclick="App.usePower('freeze')">โ๏ธ</button>
                        <span>ุชุฌููุฏ</span>
                        <span class="power-count" id="count-freeze">1</span>
                    </div>
                    <div class="power-item">
                        <button class="power-btn btn-hack" onclick="App.usePower('hack')">โ</button>
                        <span>ุงุณุชุญูุงุฐ</span>
                        <span class="power-count" id="count-hack">1</span>
                    </div>
                </div>

                <div id="game-arena"></div>
            </div>
        </div>
    </div>

    <div id="battle-setup" class="full-screen-layer hidden">
        <div class="glass-card settings-box">
            <h2 class="theme-text">ุงูุฅุนุฏุงุฏุงุช</h2>
            
            <div class="settings-section">
                <h3>1. ุงููุชูุงูุณูู</h3>
                <div class="players-config">
                    <div class="p-config">
                        <input type="text" id="p1-name" class="input-minimal" placeholder="ุงููุงุนุจ ุงูุฃูู" value="ุงููุงุนุจ 1">
                        <div class="avatar-selector" id="p1-avatars">
                            <div class="av-opt selected" onclick="App.selectAvatar('X', 'X', this)">X</div>
                            <div class="av-opt" onclick="App.selectAvatar('X', '๐ฆ', this)">๐ฆ</div>
                            <div class="av-opt" onclick="App.selectAvatar('X', '๐', this)">๐</div>
                        </div>
                        <input type="hidden" id="p1-avatar-val" value="X">
                    </div>
                    <div class="vs-divider">ุถุฏ</div>
                    <div class="p-config">
                        <input type="text" id="p2-name" class="input-minimal" placeholder="ุงููุงุนุจ ุงูุซุงูู" value="ุงููุงุนุจ 2">
                        <div class="avatar-selector" id="p2-avatars">
                            <div class="av-opt selected" onclick="App.selectAvatar('O', 'O', this)">O</div>
                            <div class="av-opt" onclick="App.selectAvatar('O', '๐ฏ', this)">๐ฏ</div>
                            <div class="av-opt" onclick="App.selectAvatar('O', '๐', this)">๐</div>
                        </div>
                        <input type="hidden" id="p2-avatar-val" value="O">
                    </div>
                </div>
            </div>

            <div class="settings-section">
                <h3>2. ูุธุงู ุงูุฃููุงู</h3>
                <div class="theme-selector">
                    <div class="theme-opt theme-plasma selected" onclick="App.setTheme('plasma', this)">
                        <div class="color-preview"></div>
                        <span>ุจูุงุฒูุง</span>
                    </div>
                    <div class="theme-opt theme-matrix" onclick="App.setTheme('matrix', this)">
                        <div class="color-preview"></div>
                        <span>ูุงุชุฑููุณ</span>
                    </div>
                    <div class="theme-opt theme-royal" onclick="App.setTheme('royal', this)">
                        <div class="color-preview"></div>
                        <span>ูููู</span>
                    </div>
                </div>
            </div>

            <div class="settings-section">
                <h3>3. ูุคูุช ุงูุชูููุฑ</h3>
                <div class="timer-selector">
                    <div class="timer-opt selected" onclick="App.setTimer(0, this)">ุจุฏูู</div>
                    <div class="timer-opt" onclick="App.setTimer(15, this)">15ุซ</div>
                    <div class="timer-opt" onclick="App.setTimer(10, this)">10ุซ</div>
                    <div class="timer-opt" onclick="App.setTimer(5, this)">5ุซ</div>
                </div>
            </div>

            <div class="setup-actions">
                <button class="btn-primary" onclick="App.startMatch()">ุจุฏุก ุงูุชุญุฏู</button>
                <button class="btn-text" onclick="App.hideSetup()">ุฅูุบุงุก</button>
            </div>
        </div>
    </div>

    <div id="instructions-modal" class="full-screen-layer hidden">
        <div class="glass-card instructions-box">
            <h2 class="theme-text">ุฏููู ุงูุฃูุงุฏูููุฉ</h2>
            <div class="tabs-header">
                <button class="tab-btn active" onclick="App.switchTab('rules')">ุงูููุงููู</button>
                <button class="tab-btn" onclick="App.switchTab('modes')">ุงูุฃููุงุท</button>
                <button class="tab-btn" onclick="App.switchTab('powers')">ุงููุฏุฑุงุช</button>
            </div>
            
            <div id="tab-rules" class="tab-content">
                <ul>
                    <li><strong>ุงููุฏู:</strong> ุงูููุฒ ุจู 3 ูุฑุจุนุงุช ูุจูุฑุฉ ูุชุฌุงูุฑุฉ (ุฃูููุงูุ ุนููุฏูุงูุ ุฃู ูุทุฑูุงู).</li>
                    <li><strong>ุงูุฅุฌุจุงุฑ:</strong> ุญุฑูุชู ูู ุงููุฑุจุน ุงูุตุบูุฑ ุชุญุฏุฏ ุฃูู ูุฌุจ ุฃู ููุนุจ ุฎุตูู ุชุงููุงู.</li>
                    <li><strong>ุงูููุทูุฉ ุงููุดุทุฉ:</strong> ุงููุฑุจุน ุงููุถูุก ุจุงูุฐูุจู ูู ุงูููุงู ุงููุญูุฏ ุงููุณููุญ ุจุงููุนุจ ููู.</li>
                    <li><strong>ุงูุญุฑูุฉ:</strong> ุฅุฐุง ูุฌูู ุงูุฎุตู ููุฑุจุน ููุชูุฆ ุฃู ูุบููุ ููููู ุงููุนุจ ูู ุฃู ููุงู ุชุฑูุฏู!</li>
                </ul>
            </div>

            <div id="tab-modes" class="tab-content hidden">
                <ul>
                    <li><strong>โ๏ธ ุงูุชูุชูู:</strong> ูุนุจ ูุจุงุดุฑ (XO). ุงูุฃูุถู ููุชุฎุทูุท ุงูุงุณุชุฑุงุชูุฌู.</li>
                    <li><strong>โก ุงูููุงุฌูุฉ:</strong> ูุฌุจ ุญู ูุณุฃูุฉ ุถุฑุจ (ูุซูุงู 5ร6) ูุชุถุน ุนูุงูุชู.</li>
                    <li><strong>๐งฉ ุงูุดููุฑุฉ:</strong> ูุนุงุฏูุงุช ุจูุฌููู ูุงุญุฏ (3 + ุ = 9).</li>
                    <li><strong>โ๏ธ ุงูุซูุงุฆูุงุช:</strong> ูู ุงูุฑูู ุฒูุฌู ุฃู ูุฑุฏูุ</li>
                </ul>
            </div>

            <div id="tab-powers" class="tab-content hidden">
                <div class="power-desc">
                    <span class="icon">๐งน</span>
                    <div><strong>ุงูููุญุงุฉ (ูุฑุฉ ูุงุญุฏุฉ):</strong> ุชููู ุจุชูุธูู ูุฑุจุน ูุจูุฑ ูุงูู ูุฅุนุงุฏุฉ ุงููุนุจ ููู ูู ุงูุตูุฑ. ุงุณุชุฎุฏููุง ูุฅููุงุฐ ูุฑุจุน ุนูู ูุดู ุงูุณููุท.</div>
                </div>
                <div class="power-desc">
                    <span class="icon">โ๏ธ</span>
                    <div><strong>ุงูุชุฌููุฏ (ูุฑุฉ ูุงุญุฏุฉ):</strong> ุชููุน ุงูุชูุงู ุงูุฏูุฑ ููุฎุตูุ ููุง ูุณูุญ ูู ุจุงููุนุจ ูุฑุชูู ูุชุชุงููุชูู.</div>
                </div>
                <div class="power-desc">
                    <span class="icon">โ</span>
                    <div><strong>ุงูุงุณุชุญูุงุฐ (ูุฑุฉ ูุงุญุฏุฉ):</strong> ุงุฎุชุฑ ุฎููุฉ ูููููุง ุฎุตูู ููู ุจุชุญููููุง ูุตุงูุญู ููุฑุงู.</div>
                </div>
            </div>

            <button class="btn-primary" onclick="App.closeInstructions()">ูููุช</button>
        </div>
    </div>

    <div id="math-modal" class="full-screen-layer hidden">
        <div class="glass-card calculator-box">
            <div id="timer-bar-container" class="hidden"><div id="timer-bar-fill"></div></div>
            <div id="timeout-msg" class="hidden">ุงูุชูู ุงูููุช!</div>
            <h3 id="calc-question" class="theme-text" style="font-size: 2rem; direction: ltr;">?</h3>
            <div class="calc-screen"><div id="calc-input" class="input-display">_</div></div>
            <div class="numpad">
                <button onclick="App.typeNum(1)">1</button><button onclick="App.typeNum(2)">2</button><button onclick="App.typeNum(3)">3</button>
                <button onclick="App.typeNum(4)">4</button><button onclick="App.typeNum(5)">5</button><button onclick="App.typeNum(6)">6</button>
                <button onclick="App.typeNum(7)">7</button><button onclick="App.typeNum(8)">8</button><button onclick="App.typeNum(9)">9</button>
                <button onclick="App.clearCalc()" style="color: #ff4d4d;">C</button><button onclick="App.typeNum(0)">0</button>
                <button onclick="App.submitAnswer()" class="btn-primary">โ</button>
            </div>
        </div>
    </div>

    <div id="victory-modal" class="full-screen-layer hidden">
        <div class="victory-content">
            <div class="trophy-icon">๐</div>
            <h1 class="theme-text">ุงูููุชุตุฑ!</h1>
            <h2 id="winner-name">-</h2>
            <div class="victory-actions">
                <button class="btn-primary" onclick="App.rematch()">ุฌููุฉ ุฃุฎุฑู</button>
                <button class="btn-text" onclick="location.reload()">ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</button>
            </div>
        </div>
        <div id="confetti-container"></div>
    </div>

    <script src="core.js"></script>
</body>
</html>
